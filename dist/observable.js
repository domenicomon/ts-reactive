"use strict";exports.__esModule=!0,exports.Observable=void 0;var Observable=function(){function e(s){var i=this;this.value=s,this.handlers=[],this.disposables=[],this.subscribe=function(e,s){return void 0===s&&(s=!1),i.handlers.push(e),i.value&&s&&e(i.value),{dispose:function(){return i.unsubscribe(e)}}},this.unsubscribe=function(e){i.handlers=i.handlers.filter((function(s){return s!=e}))},this.dispose=function(){i.handlers.splice(0,i.handlers.length),i.disposables.forEach((function(e){return e.dispose()})),i.disposables.splice(0,i.disposables.length)},this.take=function(s){var u=new e(i.value),t=0;return u.disposables.push(i.subscribe((function(e){t<=s?(u.update(e),t+=1):u.dispose()}),!0)),u},this.takeUntil=function(e){return i.disposables.push(e.subscribe((function(){i.dispose()}))),i},this.distinct=function(s){var u=new e(i.value),t=void 0,n=i.subscribe((function(e){var i=e!==t;"function"==typeof s&&(i=s(t,e)),i&&(u.update(e),t=e)}));return u.unsubscribe=function(e){n.dispose(),u.unsubscribe(e)},u.dispose=function(){n.dispose(),u.dispose()},u},this.throttle=function(s){var u,t=new e(i.value),n=!1,o=i.subscribe((function(e){n||(t.update(e),n=!0,u=setTimeout((function(){n=!1}),s))}));return t.unsubscribe=function(e){o.dispose(),-1!==u&&clearTimeout(u),t.unsubscribe(e)},t.dispose=function(){o.dispose(),-1!==u&&clearTimeout(u),t.dispose()},t},this.debounce=function(s){var u=new e(i.value),t=-1,n=i.subscribe((function(e){-1!==t&&clearTimeout(t),t=setTimeout((function(){u.update(e)}),s)}));return u.unsubscribe=function(e){n.dispose(),-1!==t&&clearTimeout(t),u.unsubscribe(e)},u.dispose=function(){n.dispose(),void 0!==t&&clearTimeout(t),u.dispose()},u},this.sample=function(s){var u=new e(i.value),t=-1,n=-1,o=i.subscribe((function(e){-1!==n&&clearTimeout(n),-1===t&&(t=setTimeout((function(){t=-1,u.update(e)}),s)),n=setTimeout((function(){-1!==t&&clearTimeout(t),t=-1,u.update(e)}),s)}));return u.unsubscribe=function(e){o.dispose(),-1!==n&&clearTimeout(n),-1!==t&&clearTimeout(t),u.unsubscribe(e)},u.dispose=function(){o.dispose(),-1!==n&&clearTimeout(n),-1!==t&&clearTimeout(t),u.dispose()},u}}return e.prototype.update=function(e){return this.value=e,this.handlers.forEach((function(s){return s(e)})),this},e.prototype.map=function(s){var i=new e(s(this.value));return this.subscribe((function(e){return i.update(s(e))}),!0),i},e}();exports.Observable=Observable;