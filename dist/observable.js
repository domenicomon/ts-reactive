"use strict";exports.__esModule=!0,exports.Observable=void 0;var Observable=function(){function e(s){var i=this;this.value=s,this.handlers=[],this.disposables=[],this.take=function(s){var t=new e(i.value),u=0;return t.disposables.push(i.subscribe((function(e){u<=s?(t.update(e),u+=1):t.dispose()}),!0)),t},this.takeUntil=function(e){return i.disposables.push(e.subscribe((function(){i.dispose()}))),i},this.distinct=function(s){var t=new e(i.value),u=void 0,n=i.subscribe((function(e){var i=e!==u;"function"==typeof s&&(i=s(u,e)),i&&(t.update(e),u=e)}));return t.unsubscribe=function(e){n.dispose(),t.unsubscribe(e)},t.dispose=function(){n.dispose(),t.dispose()},t},this.throttle=function(s){var t,u=new e(i.value),n=!1,o=i.subscribe((function(e){n||(u.update(e),n=!0,t=setTimeout((function(){n=!1}),s))}));return u.unsubscribe=function(e){o.dispose(),-1!==t&&clearTimeout(t),u.unsubscribe(e)},u.dispose=function(){o.dispose(),-1!==t&&clearTimeout(t),u.dispose()},u},this.debounce=function(s){var t=new e(i.value),u=-1,n=i.subscribe((function(e){-1!==u&&clearTimeout(u),u=setTimeout((function(){t.update(e)}),s)}));return t.unsubscribe=function(e){n.dispose(),-1!==u&&clearTimeout(u),t.unsubscribe(e)},t.dispose=function(){n.dispose(),void 0!==u&&clearTimeout(u),t.dispose()},t},this.sample=function(s){var t=new e(i.value),u=-1,n=-1,o=i.subscribe((function(e){-1!==n&&clearTimeout(n),-1===u&&(u=setTimeout((function(){u=-1,t.update(e)}),s)),n=setTimeout((function(){-1!==u&&clearTimeout(u),u=-1,t.update(e)}),s)}));return t.unsubscribe=function(e){o.dispose(),-1!==n&&clearTimeout(n),-1!==u&&clearTimeout(u),t.unsubscribe(e)},t.dispose=function(){o.dispose(),-1!==n&&clearTimeout(n),-1!==u&&clearTimeout(u),t.dispose()},t}}return e.prototype.subscribe=function(e,s){var i=this;return void 0===s&&(s=!1),this.handlers.push(e),this.value&&s&&e(this.value),{dispose:function(){return i.unsubscribe(e)}}},e.prototype.unsubscribe=function(e){this.handlers=this.handlers.filter((function(s){return s!=e}))},e.prototype.dispose=function(){this.handlers.splice(0,this.handlers.length),this.disposables.forEach((function(e){return e.dispose()})),this.disposables.splice(0,this.disposables.length)},e.prototype.update=function(e){return this.value=e,this.handlers.forEach((function(s){return s(e)})),this},e.prototype.map=function(s){var i=new e(s(this.value));return this.subscribe((function(e){return i.update(s(e))}),!0),i},e}();exports.Observable=Observable;